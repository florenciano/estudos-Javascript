(function(a){a.fn.viewportChecker=function(d){var f={classToAdd:"visible",offset:100,repeat:false,callbackFunction:function(h,g){},scrollHorizontal:false};a.extend(f,d);var b=this,e=(!f.scrollHorizontal)?a(window).height():a(window).width(),c=((navigator.userAgent.toLowerCase().indexOf("webkit")!=-1)?"body":"html");this.checkElements=function(){if(!f.scrollHorizontal){var h=a(c).scrollTop(),g=(h+e)}else{var h=a(c).scrollLeft(),g=(h+e)}b.each(function(){var j=a(this),k={},l={};if(j.data("add")){l.classToAdd=j.data("add")}if(j.data("offset")){l.offset=j.data("offset")}if(j.data("repeat")){l.repeat=j.data("repeat")}if(j.data("scrollHorizontal")){l.scrollHorizontal=j.data("scrollHorizontal")}a.extend(k,f);a.extend(k,l);if(j.hasClass(k.classToAdd)&&!k.repeat){return}var m=(!k.scrollHorizontal)?Math.round(j.offset().top)+k.offset:Math.round(j.offset().left)+k.offset,i=m+(j.height());if((m<g)&&(i>h)){j.addClass(k.classToAdd);k.callbackFunction(j,"add")}else{if(j.hasClass(k.classToAdd)&&(k.repeat)){j.removeClass(k.classToAdd);k.callbackFunction(j,"remove")}}})};a(window).bind("load scroll touchmove",this.checkElements);a(window).resize(function(g){e=(!f.scrollHorizontal)?g.currentTarget.innerHeight:g.currentTarget.innerWidth});this.checkElements();return this}})(jQuery);